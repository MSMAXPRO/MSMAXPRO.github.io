<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project: URL Shortener - CodeWithMSMAXPRO</title>
    
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

    <style>
        /* --- Page-Specific Highlight Color --- */
        .highlight {
            background: linear-gradient(90deg, #f43f5e, #ec4899); /* Rose/Pink */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* --- Styles from your project-blog.html template --- */
        .content-container {
            padding-top: 60px;
            padding-bottom: 60px;
        }
        .content-body {
            max-width: 900px;
            margin: 0 auto;
            background: #0f172a; /* Card background */
            padding: 40px;
            border-radius: 12px;
            border: 1px solid #1e293b;
            color: #cbd5e1; /* Default text color */
        }
        .content-header {
            text-align: center;
            border-bottom: 1px solid #334155;
            padding-bottom: 30px;
            margin-bottom: 30px;
        }
        .content-header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        .content-header .content-meta {
            font-size: 1.25rem;
            color: #94a3b8;
        }
        .content-body p, .content-body li {
            line-height: 1.7;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }
        .content-body h2 {
            color: #fff;
            font-size: 2rem;
            margin-top: 40px;
            margin-bottom: 20px;
            border-bottom: 2px solid #334155;
            padding-bottom: 10px;
        }
        .content-body h3 {
            color: #e2e8f0;
            font-size: 1.8rem;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        .content-body ul, .content-body ol {
            padding-left: 25px;
        }
        .content-body strong {
            color: #e2e8f0;
        }
        .next-step-link {
            text-align: center;
            margin-top: 50px;
        }
        
        /* Tech stack icons style */
        .tech-stack-icons {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 10px;
            margin-bottom: 20px;
            align-items: center;
        }
        .tech-stack-icons .tech-icon {
            display: flex;
            flex-direction: column;
            align: items-center;
            gap: 8px;
            font-size: 0.9rem;
            color: #94a3b8;
        }
        .tech-stack-icons img {
            height: 50px;
            width: 50px;
            object-fit: contain;
        }

        /* --- Code Block Styles --- */
        .content-body pre {
            background: #1e293b;
            border: 1px solid #334155;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.95rem;
            margin-bottom: 20px;
        }
        .content-body code {
            font-family: 'Courier New', Courier, monospace;
        }
        .content-body .code-filename {
            display: block;
            margin-top: 20px;
            margin-bottom: -15px;
            padding: 8px 15px;
            background: #334155;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            font-size: 0.9rem;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <header>
        </header>

    <main>
        <section class="content-container">
            <div class="container">
                <article class="content-body">
                    
                    <div class="content-header">
                        <h1>Project Idea: <span class="highlight">URL Shortener</span></h1>
                        <p class="content-meta">Build a full-stack MERN tool like Bit.ly.</p>
                    </div>

                    <p>This is a classic full-stack utility project. You will build a tool that takes a very long URL from a user and gives them back a short, unique link (e.g., `mysite.com/a8f3H`). When anyone visits that short link, your app will automatically redirect them to the original long URL. This project is fantastic for understanding the full MERN stack flow.</p>
                    
                    
                    <h2>‚ú® Key Features</h2>
                    <ul>
                        <li>An input field to paste a long URL.</li>
                        <li>A "Shorten" button that generates a unique short code.</li>
                        <li>Display the new, short link to the user.</li>
                        <li>When the short link is visited, it must redirect to the original long URL.</li>
                        <li>(Bonus) Count how many times a link has been clicked.</li>
                    </ul>

                    <h2>üíª Tech Stack & Skills</h2>
                    <ul>
                        <li><strong>Tech Stack:</strong> React (Frontend), Express/Node.js (Backend), MongoDB (Database), `nanoid` (for generating codes), `cors`.</li>
                        <li><strong>Skills Practiced:</strong> Full-stack API, Database schema design, Backend routing & redirection, Form handling in React, State Management.</li>
                    </ul>
                    
                    <div class="tech-stack-icons">
                        <div class="tech-icon">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg" alt="React">
                            <span>React</span>
                        </div>
                         <div class="tech-icon">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/d/d9/Node.js_logo.svg" alt="Node.js">
                            <span>Node.js</span>
                        </div>
                        <div class="tech-icon">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/9/93/MongoDB_Logo.svg" alt="MongoDB">
                            <span>MongoDB</span>
                        </div>
                        <div class="tech-icon">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/6/64/Expressjs.png" alt="Express">
                            <span>Express</span>
                        </div>
                    </div>

                    <h2>üõ†Ô∏è Full Step-by-Step Tutorial</h2>
                    <p>This project has two parts: the **Backend API** (Node/Express) that handles the logic and database, and the **Frontend App** (React) that the user interacts with.</p>

                    <h3>Part 1: The Backend API (Node.js & Express)</h3>
                    
                    <p><strong>Step 1.1: Setup Project</strong></p>
                    <ol>
                        <li>Create a new folder named <code>backend</code>.</li>
                        <li>Open a terminal in that folder and run <code>npm init -y</code>.</li>
                        <li>Install the necessary packages: <br>
                            <code>npm install express mongoose nanoid cors dotenv</code>
                        </li>
                        <li>Install <code>nodemon</code> as a dev dependency: <br>
                            <code>npm install -D nodemon</code>
                        </li>
                    </ol>

                    <p><strong>Step 1.2: Create the Server Entrypoint</strong></p>
                    <p>Create a file named <code>index.js</code>.</p>
                    
                    <span class="code-filename">backend/index.js</span>
                    <pre><code>require('dotenv').config(); // Load .env variables
const express = require('express');
const cors = require('cors');
const mongoose = require('mongoose');

const app = express();
const PORT = process.env.PORT || 5000;

// Middlewares
app.use(cors());
app.use(express.json()); // To parse JSON request bodies

// Database Connection
mongoose.connect(process.env.MONGO_URI, {
    useNewUrlParser: true,
    useUnifiedTopology: true,
})
.then(() => console.log('Connected to MongoDB'))
.catch(err => console.error('Could not connect to MongoDB:', err));

// (Routes will go here)

app.listen(PORT, () => {
    console.log(`Server running on port ${PORT}`);
});
</code></pre>
                    <p>You'll also need a <code>.env</code> file in the <code>backend</code> folder:</p>
                    <span class="code-filename">backend/.env</span>
                    <pre><code>MONGO_URI=your_mongodb_connection_string_here</code></pre>
                    <p>(You can get a free string from <a href="https://www.mongodb.com/cloud/atlas" target="_blank">MongoDB Atlas</a>).</p>


                    <p><strong>Step 1.3: Create the URL Model</strong></p>
                    <p>Create a folder <code>models</code> and inside it, a file <code>Url.js</code>.</p>
                    
                    <span class="code-filename">backend/models/Url.js</span>
                    <pre><code>const mongoose = require('mongoose');

const urlSchema = new mongoose.Schema({
    longUrl: {
        type: String,
        required: true,
    },
    shortCode: {
        type: String,
        required: true,
        unique: true,
    },
    clicks: {
        type: Number,
        default: 0,
    },
    createdAt: {
        type: Date,
        default: Date.now,
    },
});

module.exports = mongoose.model('Url', urlSchema);
</code></pre>

                    <p><strong>Step 1.4: Create the Routes</strong></p>
                    <p>This is the most important part. We need two routes:</p>
                    <ol>
                        <li><code>POST /api/shorten</code>: To create a new short URL.</li>
                        <li><code>GET /:shortCode</code>: To redirect to the long URL.</li>
                    </ol>
                    <p>Create a folder <code>routes</code> and inside it, a file <code>url.js</code>.</p>

                    <span class="code-filename">backend/routes/url.js</span>
                    <pre><code>const express = require('express');
const router = express.Router();
const { nanoid } = require('nanoid');
const Url = require('../models/Url');

// --- 1. The "Shorten" Route ---
router.post('/api/shorten', async (req, res) => {
    const { longUrl } = req.body;
    const baseUrl = process.env.BASE_URL || `http://localhost:${process.env.PORT || 5000}`;

    try {
        // Check if this long URL is already in the database
        let url = await Url.findOne({ longUrl });

        if (url) {
            // If it exists, return the existing short URL
            res.json({ shortUrl: `${baseUrl}/${url.shortCode}` });
        } else {
            // If not, create a new short code
            const shortCode = nanoid(7);
            
            // Create a new Url document
            url = new Url({
                longUrl,
                shortCode,
            });

            await url.save();
            res.status(201).json({ shortUrl: `${baseUrl}/${url.shortCode}` });
        }
    } catch (err) {
        console.error(err);
        res.status(500).json('Server error');
    }
});


// --- 2. The "Redirect" Route ---
// IMPORTANT: This must be a separate route handler
router.get('/:shortCode', async (req, res) => {
    try {
        const url = await Url.findOne({ shortCode: req.params.shortCode });

        if (url) {
            // Increment click count
            url.clicks++;
            await url.save();

            // Redirect to the original long URL
            return res.redirect(url.longUrl);
        } else {
            return res.status(404).json('No URL found');
        }
    } catch (err) {
        console.error(err);
        res.status(500).json('Server error');
    }
});

module.exports = router;
</code></pre>

                    <p><strong>Step 1.5: Connect Routes in `index.js`</strong></p>
                    <p>Add this line to your <code>backend/index.js</code> file (before <code>app.listen</code>):</p>
                    
                    <span class="code-filename">backend/index.js (Add this line)</span>
                    <pre><code>// Routes will go here
app.use('/', require('./routes/url'));
</code></pre>
                    <p>Your backend is now complete! You can run it with <code>nodemon index.js</code>.</p>


                    <h3>Part 2: The Frontend (React)</h3>

                    <p><strong>Step 2.1: Setup Project</strong></p>
                    <ol>
                        <li>In your main project folder (outside <code>backend</code>), run: <br>
                            <code>npx create-react-app frontend</code>
                        </li>
                        <li><code>cd frontend</code></li>
                        <li>Install Axios: <code>npm install axios</code></li>
                    </ol>

                    <p><strong>Step 2.2: The Main Component (`App.js`)</strong></p>
                    <p>For this simple app, we can write all our logic in <code>App.js</code>.</p>
                    
                    <span class="code-filename">frontend/src/App.js</span>
                    <pre><code>import React, { useState } from 'react';
import axios from 'axios';
import './App.css'; // We will create this file

function App() {
    const [longUrl, setLongUrl] = useState('');
    const [shortUrl, setShortUrl] = useState(null);
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState(null);

    const handleSubmit = async (e) => {
        e.preventDefault();
        setLoading(true);
        setError(null);
        setShortUrl(null);

        try {
            // Make API request to our backend
            const response = await axios.post('http://localhost:5000/api/shorten', {
                longUrl: longUrl,
            });
            setShortUrl(response.data.shortUrl);
        } catch (err) {
            setError('Failed to shorten URL. Please try again.');
            console.error(err);
        } finally {
            setLoading(false);
        }
    };

    return (
        <div className="app-container">
            <div className="content-body" style={{maxWidth: '600px'}}>
                <div className="content-header" style={{border: 'none', padding: 0, marginBottom: '20px'}}>
                    <h1>URL <span className="highlight">Shortener</span></h1>
                    <p className="content-meta">Enter a long URL to get a short link.</p>
                </div>
                
                <form onSubmit={handleSubmit} className="url-form">
                    <input 
                        type="url"
                        value={longUrl}
                        onChange={(e) => setLongUrl(e.target.value)}
                        placeholder="https://example.com/my-very-long-url"
                        required
                    />
                    <button type="submit" disabled={loading}>
                        {loading ? 'Shortening...' : 'Shorten'}
                    </button>
                </form>

                <div className="result-display">
                    {error && <p className="error-text">{error}</p>}
                    {shortUrl && (
                        <div className="short-url-result">
                            <p>Your short URL:</p>
                            <a href={shortUrl} target="_blank" rel="noopener noreferrer">
                                {shortUrl}
                            </a>
                        </div>
                    )}
                </div>
            </div>
        </div>
    );
}

export default App;
</code></pre>

                    <p><strong>Step 2.3: Basic Styling (`App.css`)</strong></p>
                    <p>Create <code>frontend/src/App.css</code> to make it look good.</p>
                    
                    <span class="code-filename">frontend/src/App.css</span>
                    <pre><code>.app-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 80vh;
    font-family: 'Inter', sans-serif;
}
/* We can re-use the .content-body and .highlight styles from the main site */
.highlight {
    background: linear-gradient(90deg, #f43f5e, #ec4899);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
.url-form {
    display: flex;
    gap: 10px;
}
.url-form input {
    flex-grow: 1;
    padding: 12px 15px;
    font-size: 1rem;
    border-radius: 8px;
    border: 1px solid #334155;
    background-color: #1e293b;
    color: #fff;
}
.url-form button {
    padding: 12px 20px;
    font-size: 1rem;
    font-weight: 700;
    border: none;
    border-radius: 8px;
    background: linear-gradient(90deg, #a78bfa, #f472b6);
    color: #fff;
    cursor: pointer;
}
.url-form button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}
.result-display {
    margin-top: 30px;
    text-align: center;
}
.error-text {
    color: #f87171;
}
.short-url-result p {
    font-size: 1.1rem;
    margin-bottom: 10px;
}
.short-url-result a {
    font-size: 1.2rem;
    color: #38bdf8;
    font-weight: bold;
    word-break: break-all;
}
</code></pre>

                    <p>Done! Now, run your backend (<code>nodemon index.js</code>) and your frontend (<code>npm start</code>) in two separate terminals. Your MERN URL shortener should be working!</p>

                    <h2>üî• Next Steps & Challenges</h2>
                    <p>After completing this tutorial, try these ideas:</p>
                    <ul>
                        <li>**Click Tracking:** Create a new API route (`GET /api/stats/:shortCode`) that returns the `clicks` count for a link and display it on the frontend.</li>
                        <li>**User Accounts:** Add MERN authentication so users can sign up, log in, and see a dashboard of *all* the links they have shortened.</li>
                        <li>**Custom URLs:** Allow users to choose their own custom short code (e.g., `mysite.com/my-portfolio`) instead of a random one.</li>
                        <li>**Copy to Clipboard:** Add a button that copies the new short URL to the user's clipboard.</li>
                    </ul>
                    
                    <div class="next-step-link">
                        <a href="projects.html" class="cta-button">&larr; Back to All Project Ideas</a>
                    </div>
                </article>
            </div>
        </section>
    </main>

    <footer style="background-color: #1e293b; padding: 50px 0 20px 0; border-top: 1px solid rgba(255, 255, 255, 0.1);">
        </footer>
    
    <script src="app.js"></script> 

</body>
</html>
